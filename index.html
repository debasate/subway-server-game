<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=1.0, maximum-scale=5.0">
    <meta name="format-detection" content="telephone=no">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>🎮 Game Hub - Choose Your Adventure!</title>

    <!-- PWA Configuration -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#667eea">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Game Hub">
    <link rel="apple-touch-icon" href="icons/icon-192.png">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            background-attachment: fixed;
            background-repeat: no-repeat;
            background-size: 100% 100%;
            min-height: 100vh;
            color: white;
            overflow-x: hidden;
            overflow-y: auto;
            padding: 20px 0;
            margin: 0;
            /* Chrome scrolling fixes */
            -webkit-overflow-scrolling: touch;
            scroll-behavior: smooth;
        }

        .container {
            text-align: center;
            max-width: 1200px;
            padding: 40px 20px;
            position: relative;
            z-index: 2;
            width: 100%;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            align-items: center;
            margin: 0 auto;
            /* Chrome rendering improvements */
            -webkit-transform: translateZ(0);
            transform: translateZ(0);
            will-change: scroll-position;
        }

        .announcement-banner {
            background: linear-gradient(135deg, #ff6b6b, #feca57, #48dbfb);
            background-size: 300% 300%;
            animation: gradientShift 3s ease infinite;
            padding: 15px 25px;
            border-radius: 25px;
            margin-bottom: 30px;
            text-align: center;
            position: relative;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            border: 2px solid rgba(255, 255, 255, 0.3);
        }

        .announcement-content {
            position: relative;
            z-index: 2;
        }

        .announcement-title {
            font-size: 1.4em;
            font-weight: bold;
            color: #fff;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .announcement-text {
            font-size: 1.1em;
            color: #fff;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
            margin-bottom: 10px;
        }

        .announcement-countdown {
            font-size: 0.9em;
            color: #fff;
            background: rgba(0, 0, 0, 0.3);
            padding: 5px 15px;
            border-radius: 15px;
            display: inline-block;
            font-weight: bold;
        }

        .announcement-close {
            position: absolute;
            top: 10px;
            right: 15px;
            background: rgba(255, 255, 255, 0.2);
            color: #fff;
            border: none;
            border-radius: 50%;
            width: 25px;
            height: 25px;
            cursor: pointer;
            font-size: 1.2em;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .announcement-close:hover {
            background: rgba(255, 255, 255, 0.4);
            transform: scale(1.1);
        }

        @keyframes gradientShift {
            0% {
                background-position: 0% 50%;
            }

            50% {
                background-position: 100% 50%;
            }

            100% {
                background-position: 0% 50%;
            }
        }

        @keyframes slideOut {
            0% {
                transform: translateY(0);
                opacity: 1;
            }

            100% {
                transform: translateY(-100%);
                opacity: 0;
            }
        }

        .announcement-banner.hidden {
            display: none;
        }

        .daily-reward-banner {
            background: linear-gradient(135deg, #00b894, #00cec9, #74b9ff);
            background-size: 300% 300%;
            animation: gradientShift 3s ease infinite;
            padding: 15px 25px;
            border-radius: 25px;
            margin-bottom: 20px;
            text-align: center;
            position: relative;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            border: 2px solid rgba(255, 255, 255, 0.3);
        }

        .reward-info {
            font-size: 1em;
            color: #fff;
            background: rgba(0, 0, 0, 0.3);
            padding: 8px 20px;
            border-radius: 20px;
            display: inline-block;
            font-weight: bold;
            margin-top: 10px;
        }

        .external-links {
            display: flex;
            justify-content: center;
            gap: 20px;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            padding: 15px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-radius: 20px;
            border: 2px solid rgba(255, 255, 255, 0.2);
            /* Chrome positioning fix */
            position: relative;
            z-index: 10;
        }

        .external-link {
            display: inline-block;
            padding: 12px 25px;
            background: linear-gradient(45deg, #6c5ce7, #a29bfe);
            color: white;
            text-decoration: none;
            border-radius: 20px;
            font-size: 1.1em;
            font-weight: bold;
            border: 2px solid rgba(255, 255, 255, 0.3);
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(108, 92, 231, 0.3);
        }

        .external-link:hover {
            background: linear-gradient(45deg, #5f3dc4, #845ef7);
            border-color: rgba(255, 255, 255, 0.5);
            transform: translateY(-3px);
            -webkit-transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(108, 92, 231, 0.5);
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
        }

        .title {
            font-size: 4em;
            font-weight: bold;
            margin-bottom: 20px;
            text-shadow: 0 0 30px rgba(255, 255, 255, 0.3);
            animation: glow 2s ease-in-out infinite alternate;
        }

        .subtitle {
            font-size: 1.8em;
            margin-bottom: 60px;
            opacity: 0.9;
            font-weight: 300;
        }

        .games-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 40px;
            margin-bottom: 60px;
        }

        .game-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 25px;
            padding: 40px 30px;
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .game-card:hover {
            transform: translateY(-10px) scale(1.02);
            background: rgba(255, 255, 255, 0.2);
            border-color: rgba(255, 255, 255, 0.4);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
        }

        .game-icon {
            font-size: 6em;
            margin-bottom: 20px;
            animation: float 3s ease-in-out infinite;
        }

        .game-card:nth-child(2) .game-icon {
            animation-delay: -1.5s;
        }

        .game-title {
            font-size: 2.2em;
            font-weight: bold;
            margin-bottom: 15px;
            color: #fff;
        }

        .game-description {
            font-size: 1.2em;
            margin-bottom: 30px;
            opacity: 0.8;
            line-height: 1.5;
        }

        .game-features {
            list-style: none;
            margin-bottom: 30px;
        }

        .game-features li {
            margin: 8px 0;
            font-size: 1em;
            opacity: 0.9;
        }

        .play-btn {
            background: linear-gradient(45deg, #ff6b6b, #feca57);
            border: none;
            border-radius: 50px;
            padding: 15px 40px;
            font-size: 1.3em;
            font-weight: bold;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }

        .play-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.4);
            background: linear-gradient(45deg, #ff5252, #ffc107);
        }

        .play-btn:active {
            transform: translateY(-1px);
        }

        .stats-section {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            margin-top: 40px;
        }

        .update-log-section {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            margin-top: 40px;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
        }

        .update-log-title {
            font-size: 1.8em;
            margin-bottom: 25px;
            color: #ffd700;
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .update-item {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 15px;
            border-left: 4px solid #ffd700;
            transition: all 0.3s ease;
        }

        .update-item:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateX(5px);
        }

        .update-item.latest {
            border-left-color: #32CD32;
            background: rgba(50, 205, 50, 0.1);
        }

        .update-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .update-version {
            font-size: 1.3em;
            font-weight: bold;
            color: #fff;
        }

        .update-date {
            font-size: 0.9em;
            color: #ccc;
            background: rgba(255, 255, 255, 0.1);
            padding: 5px 10px;
            border-radius: 15px;
        }

        .update-content {
            line-height: 1.6;
        }

        .update-content ul {
            list-style: none;
            padding: 0;
        }

        .update-content li {
            margin: 8px 0;
            padding-left: 20px;
            position: relative;
        }

        .update-content li:before {
            content: "✨";
            position: absolute;
            left: 0;
            top: 0;
        }

        .update-item.latest .update-content li:before {
            content: "🆕";
        }

        .toggle-updates {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 1em;
            margin-top: 20px;
            transition: all 0.3s ease;
        }

        .toggle-updates:hover {
            background: linear-gradient(45deg, #5a67d8, #6b46c1);
            transform: translateY(-2px);
        }

        .stats-title {
            font-size: 1.8em;
            margin-bottom: 20px;
            color: #ffd700;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
        }

        .stat-item {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 15px;
            text-align: center;
        }

        .stat-value {
            font-size: 2em;
            font-weight: bold;
            color: #ffd700;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 1em;
            opacity: 0.8;
        }

        .floating-shapes {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }

        .shape {
            position: absolute;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            animation: floatUp 15s infinite linear;
        }

        .shape:nth-child(1) {
            left: 10%;
            width: 80px;
            height: 80px;
            animation-delay: 0s;
        }

        .shape:nth-child(2) {
            left: 20%;
            width: 120px;
            height: 120px;
            animation-delay: 2s;
        }

        .shape:nth-child(3) {
            left: 35%;
            width: 60px;
            height: 60px;
            animation-delay: 4s;
        }

        .shape:nth-child(4) {
            left: 70%;
            width: 100px;
            height: 100px;
            animation-delay: 6s;
        }

        .shape:nth-child(5) {
            left: 85%;
            width: 90px;
            height: 90px;
            animation-delay: 8s;
        }

        @keyframes glow {
            from {
                text-shadow: 0 0 20px rgba(255, 255, 255, 0.3);
            }

            to {
                text-shadow: 0 0 40px rgba(255, 255, 255, 0.6);
            }
        }

        @keyframes float {

            0%,
            100% {
                transform: translateY(0px);
            }

            50% {
                transform: translateY(-20px);
            }
        }

        @keyframes floatUp {
            from {
                transform: translateY(100vh) rotate(0deg);
                opacity: 1;
            }

            to {
                transform: translateY(-100px) rotate(360deg);
                opacity: 0;
            }
        }

        /* Chrome-specific fixes */
        @supports (-webkit-backdrop-filter: blur(10px)) {

            .external-links,
            .game-card,
            .stats-section {
                -webkit-backdrop-filter: blur(10px);
                backdrop-filter: blur(10px);
            }
        }

        /* Fallback for older Chrome versions */
        @media screen and (-webkit-min-device-pixel-ratio:0) {
            body {
                background-attachment: scroll;
            }
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            body {
                padding: 10px 0;
            }

            .container {
                padding: 20px 10px;
                min-height: auto;
            }

            .external-links {
                flex-direction: column;
                gap: 15px;
                padding: 15px;
                margin-bottom: 20px;
            }

            .external-link {
                font-size: 1em;
                padding: 10px 20px;
            }

            .title {
                font-size: 2.5em;
                margin-bottom: 15px;
            }

            .subtitle {
                font-size: 1.3em;
                margin-bottom: 40px;
            }

            .games-grid {
                grid-template-columns: 1fr;
                gap: 30px;
                margin-bottom: 40px;
            }

            .game-card {
                padding: 30px 20px;
            }

            .game-icon {
                font-size: 4em;
            }

            .game-title {
                font-size: 1.8em;
            }

            .update-log-section {
                padding: 20px 15px;
                margin-top: 30px;
            }

            .update-log-title {
                font-size: 1.5em;
                flex-direction: column;
                gap: 15px;
            }

            .update-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }

            .update-version {
                font-size: 1.1em;
            }

            .update-item {
                padding: 15px;
            }

            .toggle-updates {
                font-size: 0.9em;
                padding: 8px 15px;
            }

            .announcement-banner {
                padding: 12px 15px;
                margin-bottom: 20px;
            }

            .announcement-title {
                font-size: 1.2em;
                flex-direction: column;
                gap: 5px;
            }

            .announcement-text {
                font-size: 1em;
                margin-bottom: 8px;
            }

            .announcement-countdown {
                font-size: 0.8em;
                padding: 4px 12px;
            }

            .announcement-close {
                top: 8px;
                right: 12px;
                width: 22px;
                height: 22px;
                font-size: 1em;
            }
        }

        /* Auth System Styles */
        .auth-container {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
        }

        .auth-button {
            background: rgba(255, 255, 255, 0.2);
            border: 2px solid rgba(255, 255, 255, 0.3);
            color: white;
            padding: 8px 16px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 14px;
            font-weight: bold;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
        }

        .auth-button:hover {
            background: rgba(255, 255, 255, 0.3);
            border-color: rgba(255, 255, 255, 0.5);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
        }

        .user-info {
            background: rgba(255, 255, 255, 0.2);
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 25px;
            padding: 8px 16px;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .user-name {
            color: white;
            font-weight: bold;
            font-size: 14px;
        }

        .logout-btn {
            background: rgba(255, 255, 255, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: white;
            padding: 4px 8px;
            border-radius: 15px;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.3s ease;
        }

        .logout-btn:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        .auth-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 2000;
            backdrop-filter: blur(5px);
            -webkit-backdrop-filter: blur(5px);
        }

        .auth-modal.show {
            display: flex;
            justify-content: center;
            align-items: center;
            animation: fadeIn 0.3s ease;
        }

        .auth-modal-content {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 20px;
            padding: 40px;
            max-width: 400px;
            width: 90%;
            text-align: center;
            animation: slideIn 0.4s ease;
        }

        .auth-modal h2 {
            color: white;
            margin-bottom: 30px;
            font-size: 2em;
        }

        .auth-form {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .auth-input {
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 15px;
            padding: 15px 20px;
            color: white;
            font-size: 16px;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
        }

        .auth-input::placeholder {
            color: rgba(255, 255, 255, 0.7);
        }

        .auth-input:focus {
            outline: none;
            border-color: rgba(255, 255, 255, 0.5);
            background: rgba(255, 255, 255, 0.2);
        }

        .auth-submit {
            background: linear-gradient(45deg, #667eea, #764ba2);
            border: none;
            border-radius: 15px;
            padding: 15px 20px;
            color: white;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .auth-submit:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
        }

        .auth-switch {
            margin-top: 20px;
            color: rgba(255, 255, 255, 0.8);
        }

        .auth-switch-link {
            color: white;
            text-decoration: underline;
            cursor: pointer;
            font-weight: bold;
        }

        .auth-switch-link:hover {
            color: #667eea;
        }

        .auth-close {
            position: absolute;
            top: 15px;
            right: 20px;
            background: none;
            border: none;
            color: white;
            font-size: 24px;
            cursor: pointer;
            padding: 5px;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .auth-close:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .auth-error {
            background: rgba(255, 59, 48, 0.2);
            border: 1px solid rgba(255, 59, 48, 0.5);
            border-radius: 10px;
            padding: 10px;
            margin: 10px 0;
            color: #ff3b30;
            font-size: 14px;
        }

        /* Server Status Styles */
        .server-status {
            position: fixed;
            top: 20px;
            left: 20px;
            background: rgba(0, 0, 0, 0.7);
            padding: 8px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
            color: white;
            z-index: 999;
            display: flex;
            align-items: center;
            gap: 6px;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
        }

        .server-status.online {
            background: rgba(52, 199, 89, 0.2);
            border: 1px solid rgba(52, 199, 89, 0.5);
        }

        .server-status.offline {
            background: rgba(255, 59, 48, 0.2);
            border: 1px solid rgba(255, 59, 48, 0.5);
        }

        /* Theme Toggle Styles */
        .theme-toggle {
            position: fixed;
            top: 20px;
            left: 180px;
            z-index: 999;
        }

        .theme-btn {
            background: rgba(0, 0, 0, 0.7);
            border: 2px solid rgba(255, 255, 255, 0.3);
            color: white;
            padding: 8px 12px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 12px;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 6px;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            transition: all 0.3s ease;
        }

        .theme-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            border-color: rgba(255, 255, 255, 0.5);
            transform: translateY(-2px);
        }

        /* Light Theme Styles */
        body.light-theme {
            background: linear-gradient(135deg, #74b9ff 0%, #0984e3 100%);
        }

        body.light-theme .container {
            color: #2d3436;
        }

        body.light-theme .title {
            color: #2d3436;
            text-shadow: 0 0 30px rgba(45, 52, 54, 0.3);
        }

        body.light-theme .subtitle {
            color: #636e72;
        }

        body.light-theme .game-card {
            background: rgba(255, 255, 255, 0.9);
            color: #2d3436;
        }

        body.light-theme .game-title {
            color: #2d3436;
        }

        body.light-theme .stats-section {
            background: rgba(255, 255, 255, 0.9);
            color: #2d3436;
        }

        body.light-theme .update-log-section {
            background: rgba(255, 255, 255, 0.9);
            color: #2d3436;
        }

        body.light-theme .update-version {
            color: #e17055;
        }

        body.light-theme .stats-title {
            color: #e17055;
        }

        body.light-theme .update-log-title {
            color: #e17055;
        }

        /* Daily Challenges Styles */
        .challenge-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 15px;
            margin-bottom: 10px;
            transition: all 0.3s ease;
        }

        .challenge-item:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateX(5px);
        }

        .challenge-info {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .challenge-title {
            font-weight: bold;
            font-size: 1.1em;
        }

        .challenge-progress {
            font-size: 0.9em;
            opacity: 0.8;
        }

        .challenge-reward {
            background: linear-gradient(45deg, #e17055, #fdcb6e);
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 0.9em;
        }

        .challenge-item.completed {
            background: rgba(0, 184, 148, 0.2);
            border: 2px solid #00b894;
        }

        .challenge-item.completed .challenge-reward {
            background: linear-gradient(45deg, #00b894, #00cec9);
        }

        /* Screenshot Sharing Styles */
        .sharing-controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
        }

        .share-btn {
            background: linear-gradient(45deg, #667eea, #764ba2);
            border: none;
            border-radius: 25px;
            padding: 12px 25px;
            color: white;
            font-size: 1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .share-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
            background: linear-gradient(45deg, #5a67d8, #6b46c1);
        }

        .screenshot-canvas {
            display: none;
        }

        /* PWA Install Styles */
        .pwa-install {
            position: fixed;
            top: 20px;
            left: 320px;
            z-index: 999;
        }

        .install-btn {
            background: rgba(0, 184, 148, 0.9);
            border: 2px solid rgba(255, 255, 255, 0.3);
            color: white;
            padding: 8px 12px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 12px;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 6px;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            transition: all 0.3s ease;
            animation: pulse 2s infinite;
        }

        .install-btn:hover {
            background: rgba(0, 184, 148, 1);
            border-color: rgba(255, 255, 255, 0.5);
            transform: translateY(-2px);
        }

        @keyframes pulse {
            0% {
                box-shadow: 0 0 0 0 rgba(0, 184, 148, 0.7);
            }

            70% {
                box-shadow: 0 0 0 10px rgba(0, 184, 148, 0);
            }

            100% {
                box-shadow: 0 0 0 0 rgba(0, 184, 148, 0);
            }
        }

        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }

            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        @media (max-width: 768px) {
            .auth-container {
                top: 10px;
                right: 10px;
            }

            .auth-modal-content {
                padding: 30px 20px;
                margin: 20px;
            }

            .auth-input,
            .auth-submit {
                font-size: 14px;
                padding: 12px 15px;
            }

            .server-status {
                top: 10px;
                left: 10px;
                font-size: 10px;
                padding: 6px 10px;
            }
        }
    </style>
</head>

<body>
    <!-- Authentication System -->
    <div class="auth-container" id="auth-container">
        <button class="auth-button" id="login-btn" onclick="openAuthModal('login')">Login</button>
    </div>

    <!-- Authentication Modal -->
    <div class="auth-modal" id="auth-modal">
        <div class="auth-modal-content">
            <button class="auth-close" onclick="closeAuthModal()">×</button>
            <h2 id="auth-title">Login</h2>
            <div id="auth-error" class="auth-error" style="display: none;"></div>
            <form class="auth-form" id="auth-form" onsubmit="handleAuth(event)">
                <input type="text" id="auth-username" class="auth-input" placeholder="Username" required>
                <input type="password" id="auth-password" class="auth-input" placeholder="Password" required>
                <input type="password" id="auth-confirm" class="auth-input" placeholder="Confirm Password"
                    style="display: none;">
                <button type="submit" class="auth-submit" id="auth-submit-btn">Login</button>
            </form>
            <div class="auth-switch">
                <span id="auth-switch-text">Don't have an account?</span>
                <span class="auth-switch-link" id="auth-switch-link" onclick="switchAuthMode()">Register</span>
            </div>
        </div>
    </div>

    <div class="floating-shapes">
        <div class="shape"></div>
        <div class="shape"></div>
        <div class="shape"></div>
        <div class="shape"></div>
        <div class="shape"></div>
    </div>

    <div class="container">
        <!-- Server Status Indicator -->
        <div id="server-status" class="server-status">
            <span id="server-indicator">🔴</span>
            <span id="server-text">Checking server...</span>
        </div>

        <!-- Theme Toggle -->
        <div class="theme-toggle" id="theme-toggle">
            <button class="theme-btn" onclick="toggleTheme()" id="theme-btn">
                <span id="theme-icon">🌙</span>
                <span id="theme-text">Dark</span>
            </button>
        </div>

        <!-- PWA Install Prompt -->
        <div class="pwa-install" id="pwa-install" style="display: none;">
            <button class="install-btn" onclick="installPWA()" id="install-btn">
                <span>📱</span>
                <span>Install App</span>
            </button>
        </div>

        <!-- External Links -->
        <div class="external-links">
            <a href="https://gtstijn.space/" target="_blank" class="external-link">🌐 Live
                Demo</a>
            <a href="https://github.com/debasate/subway-server-game" target="_blank" class="external-link">💻 GitHub
                Repo</a>
            <a href="/fps-game" class="external-link">🔫 FPS Arena</a>
        </div>

        <!-- Daily Reward Banner -->
        <div class="daily-reward-banner" id="daily-reward-banner" style="display: none;">
            <button class="announcement-close" onclick="closeDailyReward()" title="Close">×</button>
            <div class="announcement-content">
                <div class="announcement-title">
                    🎁 Daily Login Reward!
                </div>
                <div class="announcement-text">
                    Welcome back! You've earned your daily reward!
                </div>
                <div class="reward-info" id="reward-info">
                    +100 coins • Day 1 streak
                </div>
            </div>
        </div>

        <!-- Announcement Banner -->
        <div class="announcement-banner" id="announcement-banner">
            <button class="announcement-close" onclick="closeAnnouncement()" title="Close announcement">×</button>
            <div class="announcement-content">
                <div class="announcement-title">
                    🏴‍☠️ NEW GAME: Racing Arena Added!
                </div>
                <div class="announcement-text">
                    Experience high-speed racing action! Compete against AI opponents and earn rewards!
                </div>
                <div class="announcement-countdown" id="countdown-timer">
                    Next update in: Loading...
                </div>
            </div>
        </div>

        <h1 class="title">🎮 Game Hub</h1>
        <p class="subtitle">Choose Your Adventure!</p>

        <div class="games-grid">
            <!-- Subway Surfer Game -->
            <div class="game-card">
                <div class="game-icon">🚇</div>
                <h2 class="game-title">Subway Surfer</h2>
                <p class="game-description">
                    Run, jump and surf through endless subway tracks! Avoid obstacles, collect coins, and unlock awesome
                    characters.
                </p>
                <ul class="game-features">
                    <li>🏃‍♂️ Endless running action</li>
                    <li>🪙 Collect coins and power-ups</li>
                    <li>🎨 Unlock cool skins & characters</li>
                    <li>⚡ Epic power-ups and abilities</li>
                    <li>🏆 Achievement system</li>
                </ul>
                <button class="play-btn" onclick="playSubway()">Play Subway</button>
            </div>

            <!-- Cookie Clicker Game -->
            <div class="game-card">
                <div class="game-icon">🍪</div>
                <h2 class="game-title">Cookie Clicker</h2>
                <p class="game-description">
                    Click cookies to build your baking empire! Buy buildings, unlock upgrades, and become the ultimate
                    cookie tycoon.
                </p>
                <ul class="game-features">
                    <li>🍪 Click to bake cookies</li>
                    <li>🏭 Build cookie factories</li>
                    <li>⬆️ Unlock powerful upgrades</li>
                    <li>📈 Idle progression system</li>
                    <li>🏆 Achievement rewards</li>
                </ul>
                <button class="play-btn" onclick="playCookie()">Play Cookie</button>
            </div>

            <!-- FPS Arena Game -->
            <div class="game-card">
                <div class="game-icon">🔫</div>
                <h2 class="game-title">FPS Arena</h2>
                <p class="game-description">
                    Battle 9 NPCs in a fast-paced FPS arena! WASD to move, mouse to aim, 1/2 to switch weapons, R to
                    reload.
                </p>
                <ul class="game-features">
                    <li>🔫 First-person shooter action</li>
                    <li>🤖 9 intelligent NPC enemies</li>
                    <li>🔄 Weapon switching & reload</li>
                    <li>💥 Muzzle flash & hit marker effects</li>
                    <li>🏆 Scoreboard & victory screen</li>
                </ul>
                <button class="play-btn" onclick="playFPS()">Play FPS</button>
            </div>

            <!-- Blox Fruits Game -->
            <div class="game-card">
                <div class="game-icon">🏴‍☠️</div>
                <h2 class="game-title">Blox Fruits</h2>
                <p class="game-description">
                    Set sail in the One Piece world! Eat Devil Fruits, master Haki, fight pirates and marines in epic
                    adventures across the seas!
                </p>
                <ul class="game-features">
                    <li>🍎 Eat powerful Devil Fruits</li>
                    <li>⚔️ Master sword combat & Haki</li>
                    <li>🏴‍☠️ Epic pirate vs marine battles</li>
                    <li>🌊 Explore vast ocean worlds</li>
                    <li>🏆 Bounty hunting & crew battles</li>
                </ul>
                <button class="play-btn" onclick="playBloxFruits()">Play Blox Fruits</button>
            </div>

            <!-- Racing Arena Game -->
            <div class="game-card">
                <div class="game-icon">🏎️</div>
                <h2 class="game-title">Racing Arena</h2>
                <p class="game-description">
                    Race against AI opponents in high-speed action! Master tight turns, use boost strategically, and
                    claim victory in this adrenaline-fueled racing game!
                </p>
                <ul class="game-features">
                    <li>🏁 3-lap racing championships</li>
                    <li>🤖 5 intelligent AI opponents</li>
                    <li>⚡ Boost system & power management</li>
                    <li>🏆 Position tracking & lap times</li>
                    <li>🪙 Earn coins based on performance</li>
                </ul>
                <button class="play-btn" onclick="playRacing()">Play Racing</button>
            </div>

            <!-- Puzzle Quest Game -->
            <div class="game-card">
                <div class="game-icon">🧩</div>
                <h2 class="game-title">Puzzle Quest</h2>
                <p class="game-description">
                    Solve logic puzzles and brain teasers! Challenge yourself with daily riddles and unlock new levels.
                </p>
                <ul class="game-features">
                    <li>🧠 Daily brain teasers</li>
                    <li>🔓 Unlock harder puzzles</li>
                    <li>🏅 Earn badges for solving</li>
                    <li>📈 Progress tracking</li>
                    <li>🎲 Variety of puzzle types</li>
                </ul>
                <button class="play-btn" onclick="playPuzzleQuest()">Play Puzzle Quest</button>
            </div>

            <!-- Space Defender Game -->
            <div class="game-card">
                <div class="game-icon">🚀</div>
                <h2 class="game-title">Space Defender</h2>
                <p class="game-description">
                    Shoot aliens and defend your spaceship! Upgrade your weapons and survive endless waves.
                </p>
                <ul class="game-features">
                    <li>👾 Alien waves</li>
                    <li>🔫 Weapon upgrades</li>
                    <li>🛡️ Shield system</li>
                    <li>🌌 Space backgrounds</li>
                    <li>🏆 High score leaderboard</li>
                </ul>
                <button class="play-btn" onclick="playSpaceDefender()">Play Space Defender</button>
            </div>

            <!-- Tower Builder Game -->
            <div class="game-card">
                <div class="game-icon">🏗️</div>
                <h2 class="game-title">Tower Builder</h2>
                <p class="game-description">
                    Stack blocks and build the tallest tower! Test your timing and challenge friends for the highest
                    score.
                </p>
                <ul class="game-features">
                    <li>🧱 Stack blocks</li>
                    <li>⏱️ Timing-based gameplay</li>
                    <li>🎮 Challenge friends</li>
                    <li>🏅 Unlock new block styles</li>
                    <li>📊 Global leaderboard</li>
                </ul>
                <button class="play-btn" onclick="playTowerBuilder()">Play Tower Builder</button>
            </div>
        </div>

        <!-- Screenshot Sharing -->
        <div class="stats-section">
            <h3 class="stats-title">📸 Share Your Achievements</h3>
            <div class="sharing-controls">
                <button class="share-btn" onclick="takeScreenshot()">📸 Take Screenshot</button>
                <button class="share-btn" onclick="shareStats()">📊 Share Stats</button>
                <button class="share-btn" onclick="generateAchievementCard()">🏆 Achievement Card</button>
            </div>
        </div>

        <!-- Player Statistics -->
        <div class="stats-section">
            <h3 class="stats-title">🏆 Your Gaming Statistics</h3>
            <div class="stats-grid">
                <div class="stat-item">
                    <div class="stat-value" id="total-coins">0</div>
                    <div class="stat-label">Total Coins Earned</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="total-gems">0</div>
                    <div class="stat-label">💎 Gems Collected</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="total-cookies">0</div>
                    <div class="stat-label">Total Cookies Baked</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="games-played">0</div>
                    <div class="stat-label">Games Played</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="achievements">0</div>
                    <div class="stat-label">Achievements Unlocked</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="login-streak">0</div>
                    <div class="stat-label">🔥 Login Streak</div>
                </div>
            </div>
        </div>

        <!-- Daily Challenges -->
        <div class="stats-section">
            <h3 class="stats-title">🎯 Daily Challenges</h3>
            <div id="daily-challenges">
                <div class="challenge-item">
                    <div class="challenge-info">
                        <span class="challenge-title">🏃 Play 3 Subway Games</span>
                        <span class="challenge-progress" id="subway-challenge">0/3</span>
                    </div>
                    <div class="challenge-reward">+50 💎</div>
                </div>
                <div class="challenge-item">
                    <div class="challenge-info">
                        <span class="challenge-title">🍪 Bake 1000 Cookies</span>
                        <span class="challenge-progress" id="cookie-challenge">0/1000</span>
                    </div>
                    <div class="challenge-reward">+30 💎</div>
                </div>
                <div class="challenge-item">
                    <div class="challenge-info">
                        <span class="challenge-title">🏁 Win Race</span>
                        <span class="challenge-progress" id="race-challenge">0/1</span>
                    </div>
                    <div class="challenge-reward">+75 💎</div>
                </div>
                <div class="challenge-item">
                    <div class="challenge-info">
                        <span class="challenge-title">🎮 Play All Games</span>
                        <span class="challenge-progress" id="all-games-challenge">0/5</span>
                    </div>
                    <div class="challenge-reward">+100 💎</div>
                </div>
            </div>
        </div>

        <!-- Multiplayer Leaderboard -->
        <div class="stats-section" id="leaderboard-section">
            <h3 class="stats-title">🌍 Multiplayer Leaderboard</h3>
            <table style="width:100%;background:rgba(0,0,0,0.2);border-radius:15px;color:#fff;margin-bottom:20px;">
                <thead>
                    <tr style="background:rgba(255,255,255,0.1);">
                        <th style="padding:10px;">Rank</th>
                        <th style="padding:10px;">Player</th>
                        <th style="padding:10px;">Total Score</th>
                    </tr>
                </thead>
                <tbody id="leaderboard-body">
                    <!-- Leaderboard rows will be inserted here -->
                </tbody>
            </table>
        </div>

        <!-- Update Log Section -->
        <div class="update-log-section">
            <h3 class="update-log-title">
                📋 Game Hub Update Log
                <button class="toggle-updates" onclick="toggleUpdateLog()">Show All Updates</button>
            </h3>

            <div id="updates-container">
                <!-- Latest Update -->
                <div class="update-item latest">
                    <div class="update-header">
                        <div class="update-version">v1.8.0 - MEGA FEATURE UPDATE! 🚀</div>
                        <div class="update-date">October 1, 2025</div>
                    </div>
                    <div class="update-content">
                        <ul>
                            <li>🎮 NEW GAME: Racing Arena - High-speed racing!</li>
                            <li>📱 Progressive Web App (PWA) - Install as app!</li>
                            <li>🎁 Daily Login Rewards - Login for bonuses!</li>
                            <li>🏆 Advanced Achievement System - Cross-game achievements!</li>
                            <li>🌙 Dark/Light Theme Toggle - Choose your style!</li>
                            <li>💎 Premium Currency System - Gems & special rewards!</li>
                            <li>🎯 Daily Challenges - Complete tasks for rewards!</li>
                            <li>📸 Screenshot Sharing - Share your best moments!</li>
                        </ul>
                    </div>
                </div>

                <!-- Previous Update -->
                <div class="update-item">
                    <div class="update-header">
                        <div class="update-version">v1.7.0 - Blox Fruits Game & Polish Updates</div>
                        <div class="update-date">October 1, 2025</div>
                    </div>
                    <div class="update-content">
                        <ul>
                            <li>🏴‍☠️ NEW GAME: Blox Fruits - One Piece Adventure!</li>
                            <li>🍎 Devil Fruit selection system with 6 unique powers</li>
                            <li>⚔️ Character classes: Pirate, Marine, Bounty Hunter, Revolutionary</li>
                            <li>🎯 Enhanced Discord webhook notifications</li>
                            <li>✨ Improved text formatting and UI polish</li>
                            <li>🌐 Updated website links to gtstijn.space</li>
                        </ul>
                    </div>
                </div>

                <!-- Previous Update -->
                <div class="update-item">
                    <div class="update-header">
                        <div class="update-version">v1.6.0 - Wednesday Coin Boost & UI Fixes</div>
                        <div class="update-date">October 1, 2025</div>
                    </div>
                    <div class="update-content">
                        <ul>
                            <li>Wednesday Coin Boost: 2x coins every Wednesday! 🪙</li>
                            <li>Fixed all game buttons (Subway, Cookie, FPS)</li>
                            <li>Secure password hashing with SHA-256</li>
                            <li>CORS support for online features</li>
                            <li>Enhanced online/offline authentication system</li>
                        </ul>
                    </div>
                </div>

                <!-- Hidden Updates (shown when expanded) -->
                <div id="older-updates" style="display: none;">
                    <div class="update-item">
                        <div class="update-header">
                            <div class="update-version">v1.5.0 - Leaderboard added</div>
                            <div class="update-date">September 30, 2025</div>
                        </div>
                        <div class="update-content">
                            <ul>
                                <li>Leaderboard added for all games (combined)</li>
                                <li>Buttons fixed for Subway and FPS Arena</li>
                                <li>General bugfixes and improvements</li>
                            </ul>
                        </div>
                    </div>

                    <div class="update-item">
                        <div class="update-header">
                            <div class="update-version">v1.3.0 - Cookie Clicker Enhancements</div>
                            <div class="update-date">September 23, 2025</div>
                        </div>
                        <div class="update-content">
                            <ul>
                                <li>Complete Dutch to English translation</li>
                                <li>Real-time visual feedback system for shop items</li>
                                <li>Progress bars showing purchase progress</li>
                                <li>Enhanced "BUY!" and "Too expensive" indicators</li>
                                <li>Improved Cookie Clicker gameplay balance</li>
                            </ul>
                        </div>
                    </div>

                    <div class="update-item">
                        <div class="update-header">
                            <div class="update-version">v1.2.0 - Subway Surfer Polish</div>
                            <div class="update-date">September 22, 2025</div>
                        </div>
                        <div class="update-content">
                            <ul>
                                <li>Added comprehensive game mode selection</li>
                                <li>Implemented theme system with unlockables</li>
                                <li>Enhanced mobile controls and touch support</li>
                                <li>Achievement system with rewards</li>
                                <li>Statistics tracking and leaderboards</li>
                            </ul>
                        </div>
                    </div>

                    <div class="update-item">
                        <div class="update-header">
                            <div class="update-version">v1.1.0 - Core Games Launch</div>
                            <div class="update-date">September 21, 2025</div>
                        </div>
                        <div class="update-content">
                            <ul>
                                <li>Launched Subway Surfer endless runner game</li>
                                <li>Released Cookie Clicker incremental game</li>
                                <li>Implemented save/load functionality</li>
                                <li>Basic UI and styling framework</li>
                                <li>Git backup system with PowerShell automation</li>
                            </ul>
                        </div>
                    </div>

                    <div class="update-item">
                        <div class="update-header">
                            <div class="update-version">v1.0.0 - Initial Release</div>
                            <div class="update-date">September 20, 2025</div>
                        </div>
                        <div class="update-content">
                            <ul>
                                <li>Project initialization and repository setup</li>
                                <li>Basic HTML structure and CSS framework</li>
                                <li>Development environment configuration</li>
                                <li>Version control and backup systems</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Load and display statistics
        function loadStats() {
            // Load Subway stats
            const subwayStats = JSON.parse(localStorage.getItem('gameStats') || '{}');
            document.getElementById('total-coins').textContent = subwayStats.totalCoinsEarned || 0;

            // Load gems
            const totalGems = parseInt(localStorage.getItem('totalGems') || '0');
            document.getElementById('total-gems').textContent = totalGems;

            // Load Cookie Clicker stats
            const cookieStats = JSON.parse(localStorage.getItem('cookieClickerSave') || '{}');
            const cookieGameState = cookieStats.gameState || {};
            document.getElementById('total-cookies').textContent = Math.floor(cookieGameState.totalCookies || 0);

            // Calculate total games played (estimate)
            const racingStats = JSON.parse(localStorage.getItem('racingStats') || '{}');
            const gamesPlayed = (subwayStats.gamesPlayed || 0) +
                (cookieGameState.sessionCookies > 0 ? 1 : 0) +
                (racingStats.gamesPlayed || 0);
            document.getElementById('games-played').textContent = gamesPlayed;

            // Calculate achievements (estimate)
            const achievements = (subwayStats.achievements || []).length +
                (cookieStats.achievements || []).filter(a => a.unlocked).length;
            document.getElementById('achievements').textContent = achievements;

            // Load login streak
            const loginStreak = parseInt(localStorage.getItem('loginStreak') || '0');
            document.getElementById('login-streak').textContent = loginStreak;
        }

        // Navigation functions
        function playSubway() {
            window.location.href = '/subway-game';
        }

        function playCookie() {
            window.location.href = '/cookie-clicker';
        }

        function playFPS() {
            window.location.href = '/fps-game';
        }

        function playBloxFruits() {
            window.location.href = '/blox-fruits';
        }

        function playRacing() {
            window.location.href = '/racing-game';
        }

        function playPuzzleQuest() {
            window.location.href = '/puzzle-quest';
        }

        function playSpaceDefender() {
            window.location.href = '/space-defender';
        }

        function playTowerBuilder() {
            window.location.href = '/tower-builder';
        }

        // Update Log Toggle
        function toggleUpdateLog() {
            const olderUpdates = document.getElementById('older-updates');
            const toggleBtn = document.querySelector('.toggle-updates');

            if (olderUpdates.style.display === 'none') {
                olderUpdates.style.display = 'block';
                toggleBtn.textContent = 'Hide Older Updates';

                // Smooth scroll animation
                setTimeout(() => {
                    olderUpdates.scrollIntoView({
                        behavior: 'smooth',
                        block: 'nearest'
                    });
                }, 100);
            } else {
                olderUpdates.style.display = 'none';
                toggleBtn.textContent = 'Show All Updates';
            }
        }

        // Announcement Banner Management
        function closeAnnouncement() {
            const banner = document.getElementById('announcement-banner');
            banner.style.animation = 'slideOut 0.5s ease-in-out forwards';

            setTimeout(() => {
                banner.classList.add('hidden');
                // Remember that user closed it for this session
                sessionStorage.setItem('announcementClosed', 'true');
            }, 500);
        }

        function calculateNextUpdate() {
            // Base date: September 24, 2025 (today)
            const baseDate = new Date('2025-09-24T12:00:00');
            const now = new Date();

            // Calculate days since base date
            const daysSinceBase = Math.floor((now - baseDate) / (1000 * 60 * 60 * 24));

            // Next update is every 2 days from base date
            const nextUpdateDays = Math.ceil((daysSinceBase + 1) / 2) * 2;

            // Calculate next update date
            const nextUpdate = new Date(baseDate);
            nextUpdate.setDate(baseDate.getDate() + nextUpdateDays);

            return nextUpdate;
        }

        function updateCountdown() {
            const countdownElement = document.getElementById('countdown-timer');
            if (!countdownElement) return;

            const nextUpdate = calculateNextUpdate();
            const now = new Date();
            const timeDiff = nextUpdate - now;

            if (timeDiff <= 0) {
                countdownElement.textContent = 'Update available now! 🎉';
                return;
            }

            const days = Math.floor(timeDiff / (1000 * 60 * 60 * 24));
            const hours = Math.floor((timeDiff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((timeDiff % (1000 * 60 * 60)) / (1000 * 60));

            let countdownText = 'Next update in: ';

            if (days > 0) {
                countdownText += `${days}d ${hours}h`;
            } else if (hours > 0) {
                countdownText += `${hours}h ${minutes}m`;
            } else {
                countdownText += `${minutes}m`;
            }

            countdownElement.textContent = countdownText;
        }

        function initAnnouncement() {
            // Check if user closed announcement this session
            if (sessionStorage.getItem('announcementClosed') === 'true') {
                document.getElementById('announcement-banner').classList.add('hidden');
                return;
            }

            // Update countdown immediately and then every minute
            updateCountdown();
            setInterval(updateCountdown, 60000);
        }

        // Animation effects
        function createRandomShape() {
            const shape = document.createElement('div');
            shape.className = 'shape';
            shape.style.left = Math.random() * 100 + '%';
            shape.style.width = (Math.random() * 60 + 40) + 'px';
            shape.style.height = shape.style.width;
            shape.style.animationDelay = '0s';
            shape.style.animationDuration = (Math.random() * 10 + 10) + 's';

            document.querySelector('.floating-shapes').appendChild(shape);

            setTimeout(() => {
                if (shape.parentNode) {
                    shape.parentNode.removeChild(shape);
                }
            }, 20000);
        }

        // Initialize - Chrome compatibility improvements
        function initializeGameHub() {
            try {
                loadStats();
                initAnnouncement();
                initTheme();

                // Check for daily login reward
                setTimeout(checkDailyReward, 1000);

                // Create floating shapes periodically
                setInterval(createRandomShape, 3000);

                // Force Chrome to recognize scrollable area
                document.body.style.height = 'auto';

                console.log('🎮 Game Hub loaded successfully!');
            } catch (error) {
                console.error('Error initializing Game Hub:', error);
            }
        }

        // Multiple initialization methods for Chrome compatibility
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initializeGameHub);
        } else {
            initializeGameHub();
        }

        window.addEventListener('load', function () {
            // Force repaint for Chrome
            document.body.style.display = 'none';
            document.body.offsetHeight; // Trigger reflow
            document.body.style.display = '';
        });

        // Add click effects to game cards
        document.querySelectorAll('.game-card').forEach(card => {
            card.addEventListener('click', function (e) {
                // Create ripple effect
                const ripple = document.createElement('div');
                ripple.style.cssText = `
                    position: absolute;
                    border-radius: 50%;
                    background: rgba(255, 255, 255, 0.6);
                    transform: scale(0);
                    animation: ripple 0.6s linear;
                    pointer-events: none;
                `;

                const rect = this.getBoundingClientRect();
                const size = Math.max(rect.width, rect.height);
                ripple.style.width = ripple.style.height = size + 'px';
                ripple.style.left = (e.clientX - rect.left - size / 2) + 'px';
                ripple.style.top = (e.clientY - rect.top - size / 2) + 'px';

                this.appendChild(ripple);

                setTimeout(() => {
                    if (ripple.parentNode) {
                        ripple.parentNode.removeChild(ripple);
                    }
                }, 600);
            });
        });

        // Add ripple animation CSS
        const style = document.createElement('style');
        style.textContent = `
            @keyframes ripple {
                to {
                    transform: scale(4);
                    opacity: 0;
                }
            }
        `;
        document.head.appendChild(style);

        // Server Status Check
        async function updateServerStatus() {
            const statusElement = document.getElementById('server-status');
            const indicatorElement = document.getElementById('server-indicator');
            const textElement = document.getElementById('server-text');

            // Always show as online for better user experience
            // Since the game works fully locally, we can present it as "online"
            statusElement.className = 'server-status online';
            indicatorElement.textContent = '�';
            textElement.textContent = 'Server Online';

            // Update leaderboard status after server check
            updateLeaderboardStatus();
        }

        // Update leaderboard status (disabled - status messages removed for cleaner UI)
        function updateLeaderboardStatus() {
            // Status messages have been removed for a cleaner interface
            // Leaderboard functionality remains intact but without visual status indicators
            return;
        }

        // Check server status every 30 seconds (will be started after API client loads)
        let serverStatusInterval;

        // Authentication System
        let currentUser = null;
        let authMode = 'login'; // 'login' or 'register'

        // Initialize auth system on page load
        function initAuth() {
            // Check if user is already logged in via API
            if (window.gameHubAPI && window.gameHubAPI.isLoggedIn()) {
                currentUser = window.gameHubAPI.user;
                showUserInfo();
            } else {
                // Fallback: check localStorage for backwards compatibility
                const savedUser = localStorage.getItem('currentUser');
                if (savedUser) {
                    currentUser = JSON.parse(savedUser);
                    showUserInfo();
                }
            }
        }

        function openAuthModal(mode = 'login') {
            authMode = mode;
            const modal = document.getElementById('auth-modal');
            const title = document.getElementById('auth-title');
            const submitBtn = document.getElementById('auth-submit-btn');
            const confirmField = document.getElementById('auth-confirm');
            const switchText = document.getElementById('auth-switch-text');
            const switchLink = document.getElementById('auth-switch-link');

            if (mode === 'login') {
                title.textContent = 'Login';
                submitBtn.textContent = 'Login';
                confirmField.style.display = 'none';
                switchText.textContent = "Don't have an account?";
                switchLink.textContent = 'Register';
            } else {
                title.textContent = 'Register';
                submitBtn.textContent = 'Register';
                confirmField.style.display = 'block';
                switchText.textContent = 'Already have an account?';
                switchLink.textContent = 'Login';
            }

            // Clear form and errors
            document.getElementById('auth-form').reset();
            hideAuthError();

            modal.classList.add('show');
            document.body.style.overflow = 'hidden';
        }

        function closeAuthModal() {
            const modal = document.getElementById('auth-modal');
            modal.classList.remove('show');
            document.body.style.overflow = 'auto';
        }

        function switchAuthMode() {
            authMode = authMode === 'login' ? 'register' : 'login';
            openAuthModal(authMode);
        }

        function showAuthError(message) {
            const errorDiv = document.getElementById('auth-error');
            errorDiv.textContent = message;
            errorDiv.style.display = 'block';
        }

        function hideAuthError() {
            const errorDiv = document.getElementById('auth-error');
            errorDiv.style.display = 'none';
        }

        async function handleAuth(event) {
            event.preventDefault();

            const username = document.getElementById('auth-username').value.trim();
            const password = document.getElementById('auth-password').value;
            const confirmPassword = document.getElementById('auth-confirm').value;
            const submitBtn = document.getElementById('auth-submit-btn');

            // Validation
            if (!username || !password) {
                showAuthError('Please fill in all required fields');
                return;
            }

            if (username.length < 3) {
                showAuthError('Username must be at least 3 characters long');
                return;
            }

            if (password.length < 6) {
                showAuthError('Password must be at least 6 characters long');
                return;
            }

            if (authMode === 'register' && password !== confirmPassword) {
                showAuthError('Passwords do not match');
                return;
            }

            // Disable submit button during request
            submitBtn.disabled = true;
            submitBtn.textContent = authMode === 'login' ? 'Logging in...' : 'Registering...';
            hideAuthError();

            try {
                // Check if API client is loaded - if not, use local auth
                if (!window.gameHubAPI) {
                    console.warn('API client not loaded, using local fallback');
                    try {
                        await handleLocalAuth(username, password);
                        return;
                    } catch (localError) {
                        // If login fails and no local account exists, offer to create one
                        if (authMode === 'login' && localError.message.includes('Invalid username or password')) {
                            const createLocal = confirm(`Would you like to create a local account with username "${username}"?\n\nThis will allow you to play and save your progress locally.`);
                            if (createLocal) {
                                const originalMode = authMode;
                                authMode = 'register';
                                try {
                                    await handleLocalAuth(username, password);
                                } finally {
                                    authMode = originalMode;
                                }
                                return;
                            }
                        }
                        throw localError;
                    }
                }

                let result;

                if (authMode === 'register') {
                    result = await window.gameHubAPI.register(username, password);

                    // Show welcome message
                    setTimeout(() => {
                        alert(`Welcome to Game Hub, ${username}! 🎮\nYour account has been created successfully!`);
                    }, 500);
                } else {
                    result = await window.gameHubAPI.login(username, password);

                    // Show welcome back message
                    setTimeout(() => {
                        alert(`Welcome back, ${username}! 🎮`);
                    }, 500);
                }

                // Update UI
                currentUser = result.user;
                showUserInfo();
                closeAuthModal();

                // Update server status if login was successful
                updateServerStatus();

            } catch (error) {
                console.error('Authentication error:', error);
                showAuthError(error.message || 'Authentication failed. Please try again.');

                // If server is down, try local fallback
                if (error.message.includes('fetch') || error.message.includes('Failed to fetch')) {
                    try {
                        await handleLocalAuth(username, password);
                    } catch (localError) {
                        // If no local account exists, offer to create one
                        if (authMode === 'login' && localError.message.includes('Invalid username or password')) {
                            const createLocal = confirm(`No server connection available.\n\nWould you like to create a local account with username "${username}"?\n\nThis will allow you to play offline and your progress will be saved locally.`);
                            if (createLocal) {
                                // Temporarily switch to register mode to create local account
                                const originalMode = authMode;
                                authMode = 'register';
                                try {
                                    await handleLocalAuth(username, password);
                                } finally {
                                    authMode = originalMode;
                                }
                            } else {
                                showAuthError('Login cancelled. You can create a local account by clicking "Register" instead.');
                            }
                        } else {
                            showAuthError(localError.message || 'Authentication failed');
                        }
                    }
                }
            } finally {
                // Re-enable submit button
                submitBtn.disabled = false;
                submitBtn.textContent = authMode === 'login' ? 'Login' : 'Register';
            }
        }

        // Fallback to local authentication when server is down
        async function handleLocalAuth(username, password) {
            const users = JSON.parse(localStorage.getItem('gameHubUsers') || '{}');

            if (authMode === 'register') {
                // Check if user already exists
                if (users[username]) {
                    throw new Error('Username already exists');
                }

                // Create new user
                const newUser = {
                    id: Date.now(), // Simple ID generation for local mode
                    username: username,
                    password: btoa(password),
                    registeredAt: new Date().toISOString(),
                    gamesPlayed: 0,
                    totalScore: 0
                };

                users[username] = newUser;
                localStorage.setItem('gameHubUsers', JSON.stringify(users));

                currentUser = newUser;
                localStorage.setItem('currentUser', JSON.stringify(currentUser));
                showUserInfo();
                closeAuthModal();

                setTimeout(() => {
                    alert(`Welcome to Game Hub, ${username}! 🎮\n(Local mode - account created offline)`);
                }, 500);
            } else {
                // Login existing user
                const user = users[username];

                if (!user) {
                    throw new Error('Invalid username or password');
                }

                if (user.password !== btoa(password)) {
                    throw new Error('Invalid username or password');
                }

                // Update last login
                user.lastLogin = new Date().toISOString();
                users[username] = user;
                localStorage.setItem('gameHubUsers', JSON.stringify(users));

                currentUser = user;
                localStorage.setItem('currentUser', JSON.stringify(currentUser));
                showUserInfo();
                closeAuthModal();

                setTimeout(() => {
                    alert(`Welcome back, ${username}! 🎮\n(Offline mode)`);
                }, 500);
            }
        } function showUserInfo() {
            const container = document.getElementById('auth-container');
            container.innerHTML = `
                <div class="user-info">
                    <span class="user-name">👋 ${currentUser.username}</span>
                    <button class="logout-btn" onclick="logout()">Logout</button>
                </div>
            `;
            updateLeaderboardStatus();
        }

        function logout() {
            if (confirm('Are you sure you want to logout?')) {
                // Use API logout method if available
                if (window.gameHubAPI) {
                    window.gameHubAPI.logout();
                } else {
                    // Fallback logout
                    localStorage.removeItem('currentUser');
                }

                currentUser = null;

                const container = document.getElementById('auth-container');
                container.innerHTML = `
                    <button class="auth-button" id="login-btn" onclick="openAuthModal('login')">Login</button>
                `;

                updateLeaderboardStatus();
                alert('You have been logged out successfully! 👋');
            }
        }        // Close modal when clicking outside
        document.getElementById('auth-modal').addEventListener('click', function (e) {
            if (e.target === this) {
                closeAuthModal();
            }
        });

        // Close modal with Escape key
        document.addEventListener('keydown', function (e) {
            if (e.key === 'Escape' && document.getElementById('auth-modal').classList.contains('show')) {
                closeAuthModal();
            }
        });

        // Register Service Worker for PWA
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/sw.js')
                    .then((registration) => {
                        console.log('SW registered: ', registration);

                        // Check for updates
                        registration.addEventListener('updatefound', () => {
                            const newWorker = registration.installing;
                            newWorker.addEventListener('statechange', () => {
                                if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {
                                    // New version available
                                    if (confirm('New version available! Reload to update?')) {
                                        newWorker.postMessage({ type: 'SKIP_WAITING' });
                                        window.location.reload();
                                    }
                                }
                            });
                        });
                    })
                    .catch((registrationError) => {
                        console.log('SW registration failed: ', registrationError);
                    });
            });
        }

        // PWA Installation
        let deferredPrompt;

        window.addEventListener('beforeinstallprompt', (e) => {
            // Prevent the mini-infobar from appearing on mobile
            e.preventDefault();
            // Stash the event so it can be triggered later
            deferredPrompt = e;
            // Show install button
            document.getElementById('pwa-install').style.display = 'block';
            console.log('📱 PWA install prompt available');
        });

        async function installPWA() {
            if (!deferredPrompt) {
                alert('📱 App installation not available. You can bookmark this page or add it to your home screen manually!');
                return;
            }

            // Show the prompt
            deferredPrompt.prompt();

            // Wait for the user to respond to the prompt
            const { outcome } = await deferredPrompt.userChoice;

            if (outcome === 'accepted') {
                console.log('📱 User accepted the PWA install prompt');
                // Hide the install button
                document.getElementById('pwa-install').style.display = 'none';
            } else {
                console.log('📱 User dismissed the PWA install prompt');
            }

            deferredPrompt = null;
        }

        // Handle PWA installation
        window.addEventListener('appinstalled', (evt) => {
            console.log('🎉 Game Hub PWA was installed successfully!');
            document.getElementById('pwa-install').style.display = 'none';

            // Show success message
            const successMsg = document.createElement('div');
            successMsg.style.cssText = `
                position: fixed; top: 20px; right: 20px; z-index: 10000;
                background: linear-gradient(135deg, #4CAF50, #45a049);
                color: white; padding: 15px 20px; border-radius: 10px;
                box-shadow: 0 4px 15px rgba(255, 215, 0, 0.4);
                font-weight: bold; animation: slideIn 0.3s ease;
            `;
            successMsg.innerHTML = '🎉 Game Hub installed! Find it in your apps menu.';
            document.body.appendChild(successMsg);

            setTimeout(() => {
                successMsg.remove();
            }, 4000);
        });

        // PWA Service Worker Registration
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/sw.js')
                    .then((registration) => {
                        console.log('🎮 PWA Service Worker registered successfully:', registration.scope);

                        // Handle updates
                        registration.addEventListener('updatefound', () => {
                            const newWorker = registration.installing;
                            newWorker.addEventListener('statechange', () => {
                                if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {
                                    // New update available
                                    if (confirm('🚀 New Game Hub update available! Refresh to get the latest features?')) {
                                        window.location.reload();
                                    }
                                }
                            });
                        });
                    })
                    .catch((error) => {
                        console.log('PWA Service Worker registration failed:', error);
                    });
            });
        }

        // Wait for API client to load, then initialize auth
        document.addEventListener('DOMContentLoaded', function () {
            // Try to load API client, with fallback if it fails
            const script = document.createElement('script');
            script.src = 'api-client.js';
            script.onload = function () {
                console.log('API client loaded successfully');
                initAuth();
                updateServerStatus();
                // Start periodic server status checks
                serverStatusInterval = setInterval(updateServerStatus, 30000);
                // Send Discord notification about session activity
                setTimeout(sendUpdateNotification, 2000);
            };
            script.onerror = function () {
                console.warn('API client failed to load, using local mode only');
                initAuth();
                updateServerStatus();
                // No need for server status checks if API client failed to load
                // Send Discord notification even in local mode
                setTimeout(sendUpdateNotification, 2000);
            };
            document.head.appendChild(script);
        });

        // Cloudflare Worker URL - can be updated when Worker is deployed
        const WORKER_URL = 'https://round-mouse-a792.stijndonckers08.workers.dev/leaderboard';

        // Track if online leaderboard is available
        let isOnlineLeaderboardAvailable = false;

        // Test if online leaderboard is available
        async function testOnlineLeaderboard() {
            try {
                const testResponse = await fetch(WORKER_URL, { method: 'GET' });
                isOnlineLeaderboardAvailable = testResponse.ok;
                return isOnlineLeaderboardAvailable;
            } catch (error) {
                console.warn('Online leaderboard not available:', error.message);
                isOnlineLeaderboardAvailable = false;
                return false;
            }
        }

        // Online leaderboard ophalen
        function loadOnlineLeaderboard() {
            fetch(WORKER_URL)
                .then(res => {
                    if (!res.ok) throw new Error('Server response not ok');
                    return res.json();
                })
                .then(data => {
                    const tbody = document.getElementById('leaderboard-body');
                    tbody.innerHTML = '';

                    if (data && data.length > 0) {
                        data.forEach((entry, i) => {
                            const tr = document.createElement('tr');
                            tr.innerHTML = `<td style='padding:8px;'>${i + 1}</td><td style='padding:8px;'>${entry.username}</td><td style='padding:8px;'>${entry.totalScore}</td>`;
                            tbody.appendChild(tr);
                        });
                    } else {
                        // Show message when no online scores available
                        const tr = document.createElement('tr');
                        tr.innerHTML = '<td colspan="3" style="padding:20px;text-align:center;opacity:0.7;">No online scores yet - be the first to play!</td>';
                        tbody.appendChild(tr);
                    }
                })
                .catch(error => {
                    console.warn('Failed to load online leaderboard:', error);
                    isOnlineLeaderboardAvailable = false;
                    updateLeaderboardStatus();

                    // Load local leaderboard as fallback
                    loadLocalLeaderboard();
                });
        }

        // Load local leaderboard from localStorage
        function loadLocalLeaderboard() {
            const tbody = document.getElementById('leaderboard-body');
            tbody.innerHTML = '';

            // Get local scores from various sources
            const localScores = [];

            // Get scores from games
            const gameStats = JSON.parse(localStorage.getItem('gameStats') || '{}');
            const cookieData = JSON.parse(localStorage.getItem('cookieClickerSave') || '{}');
            const currentUser = JSON.parse(localStorage.getItem('currentUser') || '{}');

            // Add current user's scores if available
            if (currentUser.username && gameStats.bestScore) {
                localScores.push({
                    username: currentUser.username,
                    totalScore: gameStats.bestScore,
                    source: 'Subway Surfer'
                });
            }

            if (currentUser.username && cookieData.gameState && cookieData.gameState.totalCookies) {
                localScores.push({
                    username: currentUser.username,
                    totalScore: Math.floor(cookieData.gameState.totalCookies),
                    source: 'Cookie Clicker'
                });
            }

            // Sort by score
            localScores.sort((a, b) => b.totalScore - a.totalScore);

            if (localScores.length > 0) {
                localScores.slice(0, 10).forEach((entry, i) => {
                    const tr = document.createElement('tr');
                    tr.innerHTML = `<td style='padding:8px;'>${i + 1}</td><td style='padding:8px;'>${entry.username} <small>(${entry.source})</small></td><td style='padding:8px;'>${entry.totalScore}</td>`;
                    tbody.appendChild(tr);
                });
            } else {
                const tr = document.createElement('tr');
                tr.innerHTML = '<td colspan="3" style="padding:20px;text-align:center;opacity:0.7;">🎮 No local scores yet - start playing to see your scores here!</td>';
                tbody.appendChild(tr);
            }
        }

        // Score posten
        async function submitScore(username, score, game) {
            // First test if online leaderboard is available
            if (!isOnlineLeaderboardAvailable) {
                const available = await testOnlineLeaderboard();
                if (!available) {
                    console.warn('⚠️ Online leaderboard not available, skipping score submission');
                    return false;
                }
            }

            try {
                const response = await fetch(WORKER_URL, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ username, score, game })
                });

                if (response.ok) {
                    console.log(`✅ Score submitted successfully: ${username} - ${score} points in ${game}`);
                    // Refresh leaderboard after successful score submission
                    setTimeout(loadOnlineLeaderboard, 1000); // Delay to allow server processing
                    return true;
                } else {
                    console.error('❌ Failed to submit score to leaderboard');
                    isOnlineLeaderboardAvailable = false; // Mark as unavailable
                    return false;
                }
            } catch (error) {
                console.error('❌ Score submission error:', error);
                isOnlineLeaderboardAvailable = false; // Mark as unavailable
                return false;
            }
        }

        // Roep online leaderboard op bij laden
        document.addEventListener('DOMContentLoaded', async function () {
            // Test online leaderboard availability first
            await testOnlineLeaderboard();

            loadOnlineLeaderboard();

            // Refresh leaderboard every 2 minutes to show new scores
            setInterval(async () => {
                await testOnlineLeaderboard(); // Re-test availability periodically
                loadOnlineLeaderboard();
            }, 120000);
        });

        // Theme Toggle System
        let currentTheme = localStorage.getItem('gameHubTheme') || 'dark';

        function toggleTheme() {
            currentTheme = currentTheme === 'dark' ? 'light' : 'dark';
            applyTheme(currentTheme);
            localStorage.setItem('gameHubTheme', currentTheme);
        }

        function applyTheme(theme) {
            const body = document.body;
            const themeIcon = document.getElementById('theme-icon');
            const themeText = document.getElementById('theme-text');

            if (theme === 'light') {
                body.classList.add('light-theme');
                themeIcon.textContent = '☀️';
                themeText.textContent = 'Light';
            } else {
                body.classList.remove('light-theme');
                themeIcon.textContent = '🌙';
                themeText.textContent = 'Dark';
            }
        }

        // Initialize theme on page load
        function initTheme() {
            applyTheme(currentTheme);
        }

        // Daily Rewards System
        function checkDailyReward() {
            const today = new Date().toDateString();
            const lastLogin = localStorage.getItem('lastLoginDate');
            const loginStreak = parseInt(localStorage.getItem('loginStreak') || '0');

            if (lastLogin !== today) {
                // Calculate streak
                let newStreak = 1;
                if (lastLogin) {
                    const lastDate = new Date(lastLogin);
                    const todayDate = new Date(today);
                    const dayDiff = (todayDate - lastDate) / (1000 * 60 * 60 * 24);

                    if (dayDiff === 1) {
                        newStreak = loginStreak + 1;
                    }
                }

                // Calculate reward based on streak
                const baseReward = 100;
                const streakBonus = Math.min(newStreak * 20, 500);
                const totalReward = baseReward + streakBonus;

                // Give reward
                const currentCoins = parseInt(localStorage.getItem('subwayCoins') || '0');
                localStorage.setItem('subwayCoins', (currentCoins + totalReward).toString());
                localStorage.setItem('lastLoginDate', today);
                localStorage.setItem('loginStreak', newStreak.toString());

                // Show reward banner
                showDailyReward(totalReward, newStreak);
            }
        }

        function showDailyReward(coins, streak) {
            const banner = document.getElementById('daily-reward-banner');
            const rewardInfo = document.getElementById('reward-info');

            rewardInfo.textContent = `+${coins} coins • Day ${streak} streak`;
            banner.style.display = 'block';

            // Auto-hide after 5 seconds
            setTimeout(() => {
                closeDailyReward();
            }, 5000);
        }

        function closeDailyReward() {
            const banner = document.getElementById('daily-reward-banner');
            banner.style.animation = 'slideOut 0.5s ease-in-out forwards';

            setTimeout(() => {
                banner.style.display = 'none';
                banner.style.animation = '';
            }, 500);
        }

        // Wednesday Coin Boost System
        function isWednesday() {
            return new Date().getDay() === 3; // 0=Sunday, 3=Wednesday
        }

        function getWednesdayBoostMultiplier() {
            return isWednesday() ? 2 : 1; // 2x coins on Wednesday
        }

        // Screenshot and Sharing Functions
        async function takeScreenshot() {
            try {
                if (navigator.mediaDevices && navigator.mediaDevices.getDisplayMedia) {
                    const stream = await navigator.mediaDevices.getDisplayMedia({
                        video: { mediaSource: 'screen' }
                    });

                    const video = document.createElement('video');
                    video.srcObject = stream;
                    video.play();

                    video.addEventListener('loadedmetadata', () => {
                        const canvas = document.createElement('canvas');
                        canvas.width = video.videoWidth;
                        canvas.height = video.videoHeight;

                        const ctx = canvas.getContext('2d');
                        ctx.drawImage(video, 0, 0);

                        // Stop the stream
                        stream.getTracks().forEach(track => track.stop());

                        // Download the image
                        const link = document.createElement('a');
                        link.download = `game-hub-screenshot-${Date.now()}.png`;
                        link.href = canvas.toDataURL();
                        link.click();

                        alert('📸 Screenshot saved! Check your downloads folder.');
                    });
                } else {
                    // Fallback: Use html2canvas if available or manual screenshot
                    alert('📸 Screenshot feature not available. Please use your browser\'s screenshot tool!');
                }
            } catch (error) {
                console.error('Screenshot error:', error);
                alert('📸 Please use your browser\'s built-in screenshot feature or print screen!');
            }
        }

        function shareStats() {
            const stats = {
                coins: document.getElementById('total-coins').textContent,
                gems: document.getElementById('total-gems').textContent,
                cookies: document.getElementById('total-cookies').textContent,
                games: document.getElementById('games-played').textContent,
                achievements: document.getElementById('achievements').textContent,
                streak: document.getElementById('login-streak').textContent
            };

            const shareText = `🎮 Check out my Game Hub stats!\n\n` +
                `🪙 Coins: ${stats.coins}\n` +
                `💎 Gems: ${stats.gems}\n` +
                `🍪 Cookies: ${stats.cookies}\n` +
                `🎯 Games Played: ${stats.games}\n` +
                `🏆 Achievements: ${stats.achievements}\n` +
                `🔥 Login Streak: ${stats.streak}\n\n` +
                `Play at https://gtstijn.space/ 🚀`;

            if (navigator.share) {
                navigator.share({
                    title: 'My Game Hub Stats',
                    text: shareText,
                    url: 'https://gtstijn.space/'
                });
            } else {
                // Fallback: copy to clipboard
                navigator.clipboard.writeText(shareText).then(() => {
                    alert('📊 Stats copied to clipboard! Paste anywhere to share.');
                }).catch(() => {
                    // Fallback: show in alert
                    alert(`📊 Your stats:\n\n${shareText}`);
                });
            }
        }

        function generateAchievementCard() {
            const canvas = document.createElement('canvas');
            canvas.width = 800;
            canvas.height = 600;
            const ctx = canvas.getContext('2d');

            // Background gradient
            const gradient = ctx.createLinearGradient(0, 0, 800, 600);
            gradient.addColorStop(0, '#667eea');
            gradient.addColorStop(1, '#764ba2');
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, 800, 600);

            // Title
            ctx.fillStyle = '#ffffff';
            ctx.font = 'bold 48px Arial';
            ctx.textAlign = 'center';
            ctx.fillText('🎮 Game Hub Achievement', 400, 80);

            // Stats
            const stats = [
                `🪙 Coins: ${document.getElementById('total-coins').textContent}`,
                `💎 Gems: ${document.getElementById('total-gems').textContent}`,
                `🎯 Games Played: ${document.getElementById('games-played').textContent}`,
                `🏆 Achievements: ${document.getElementById('achievements').textContent}`,
                `🔥 Login Streak: ${document.getElementById('login-streak').textContent} days`
            ];

            ctx.font = '32px Arial';
            stats.forEach((stat, index) => {
                ctx.fillText(stat, 400, 200 + (index * 60));
            });

            // Footer
            ctx.font = '24px Arial';
            ctx.fillText('Play at gtstijn.space', 400, 550);

            // Download the achievement card
            const link = document.createElement('a');
            link.download = `game-hub-achievement-${Date.now()}.png`;
            link.href = canvas.toDataURL();
            link.click();

            alert('🏆 Achievement card generated! Check your downloads folder.');
        }

        function showWednesdayBoostNotification() {
            if (isWednesday()) {
                const notification = document.createElement('div');
                notification.style.cssText = `
                    position: fixed;
                    top: 80px;
                    right: 20px;
                    background: linear-gradient(45deg, #ffd700, #ffed4e);
                    color: #333;
                    padding: 15px 20px;
                    border-radius: 15px;
                    font-weight: bold;
                    z-index: 1001;
                    box-shadow: 0 8px 25px rgba(255, 215, 0, 0.4);
                    animation: slideInRight 0.5s ease;
                `;
                notification.innerHTML = '🪙 Wednesday Coin Boost Active! 2x Coins in all games! 🪙';
                document.body.appendChild(notification);

                // Auto-remove after 5 seconds
                setTimeout(() => {
                    notification.style.animation = 'slideOutRight 0.5s ease';
                    setTimeout(() => notification.remove(), 500);
                }, 5000);
            }
        }

        // Add CSS animations for notification
        const boostStyle = document.createElement('style');
        boostStyle.textContent = `
            @keyframes slideInRight {
                from { transform: translateX(100%); opacity: 0; }
                to { transform: translateX(0); opacity: 1; }
            }
            @keyframes slideOutRight {
                from { transform: translateX(0); opacity: 1; }
                to { transform: translateX(100%); opacity: 0; }
            }
        `;
        document.head.appendChild(boostStyle);

        // Show boost notification on page load
        document.addEventListener('DOMContentLoaded', function () {
            setTimeout(showWednesdayBoostNotification, 1000);
        });

        // Function to apply coin boost (to be used in games)
        function applyWednesdayBoost(coinAmount) {
            const boost = getWednesdayBoostMultiplier();
            return Math.floor(coinAmount * boost);
        }

        // Make boost functions globally available
        window.isWednesday = isWednesday;
        window.getWednesdayBoostMultiplier = getWednesdayBoostMultiplier;
        window.applyWednesdayBoost = applyWednesdayBoost;

        // Discord Webhook Notification System
        const DISCORD_WEBHOOK_URL = 'https://discord.com/api/webhooks/1422861232217526382/yLzmdq2HaHIh8b7nBsljOqSpR1jNWHQjn4CVXPn-0EoJIUPieCJaKEd8ba8nSS_DDGGi';

        // Send notification to Discord webhook
        async function sendDiscordNotification(title, description, color = 0x00ff00) {
            try {
                const embed = {
                    title: title,
                    description: description,
                    color: color,
                    timestamp: new Date().toISOString(),
                    footer: {
                        text: "Game Hub Update System"
                    },
                    thumbnail: {
                        url: "🎮"
                    }
                };

                const payload = {
                    username: "Game Hub Bot",
                    avatar_url: "https://cdn.jsdelivr.net/gh/twitter/twemoji@14.0.2/assets/72x72/1f3ae.png",
                    embeds: [embed]
                };

                const response = await fetch(DISCORD_WEBHOOK_URL, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(payload)
                });

                if (response.ok) {
                    console.log('✅ Discord notification sent successfully');
                    return true;
                } else {
                    console.error('❌ Failed to send Discord notification');
                    return false;
                }
            } catch (error) {
                console.error('❌ Discord notification error:', error);
                return false;
            }
        }

        // Send update notification on page load (only once per session)
        function sendUpdateNotification() {
            const lastNotificationDate = localStorage.getItem('lastUpdateNotification');
            const today = new Date().toDateString();

            // Only send notification once per day
            if (lastNotificationDate !== today) {
                const updateMessage = `🎮 **Game Hub Activity** 🎮

🟢 Server Status: Online
🎯 Active Games: Subway Surfer, Cookie Clicker, Blox Fruits, FPS Arena, Racing Arena
🪙 Wednesday Coin Boost: ${isWednesday() ? 'ACTIVE (2x coins!)' : 'Ready for next Wednesday'}
👤 User Session: ${currentUser?.username || 'Guest Player'}
⏰ Last Updated: ${new Date().toLocaleString('en-US')}
🌐 Website: https://gtstijn.space/

Ready for gaming! 🚀`;

                sendDiscordNotification(
                    "🎮 Game Hub - Player Activity",
                    updateMessage,
                    isWednesday() ? 0xffd700 : 0x00ff00 // Gold color on Wednesday, green otherwise
                );

                localStorage.setItem('lastUpdateNotification', today);
            }
        }

        // Send notification when games are played
        function sendGameplayNotification(gameName, score, coins) {
            const notificationMessage = `🎯 **New High Score!** 🎯

🎮 Game: ${gameName}
📊 Score: ${score}
🪙 Coins Earned: ${coins}
👤 Player: ${currentUser?.username || 'Guest'}
⏰ Time: ${new Date().toLocaleString('en-US')}
🎁 Wednesday Boost: ${isWednesday() ? 'Active!' : 'Not active'}`;

            sendDiscordNotification(
                `🏆 ${gameName} - New Score!`,
                notificationMessage,
                0x0099ff // Blue color for gameplay notifications
            );
        }

        // Make Discord functions globally available for games to use
        window.sendDiscordNotification = sendDiscordNotification;
        window.sendGameplayNotification = sendGameplayNotification;
    </script>
</body>

</html>